# CTG Stock Data Processor

## Usage Guide

This program processes stock tick data and allows querying data within specified time intervals. The program takes two command line arguments: `start_time` and `end_time`, both in UTC format.

### How to Use

1. **Preprocess and Clean Data**

    ```bash
    python clean_data.py
    ```

2. **Run the Program**:

    ```sh
    python main.py <start_time> <end_time>
    ```
    Example:
    ```sh
    python main.py 2024-09-16-09:30:00.076 2024-09-16-10:30:00.000
    ```

3. **Time Format**:
    - The time format should be `YYYY-MM-DD-HH:MM:SS.sss`.
    - Ensure that `start_time` is earlier than `end_time`.
    - Both `start_time`  and `end_time` should be within trading hours (9:30 AM to 4:00 PM).

### Assumptions and Limitations

- The program assumes that the input times are in UTC.
- The program only processes data within the trading hours of 9:30 AM to 4:00 PM.
- The program preprocesses all data in advance and stores the cleaned version in binary format for fast queries, based on the assumption that **query patterns are stable**, **data updates are infrequent**, and **storage is sufficient**.
  - The data files `tick_data.bin` and `tick_data_index.pkl` should be generated by running `python clean_data.py`. These two files are used to store the cleaned data and index for the data. 


- Currently, the program does not support querying data for specific time intervals within the  `start_time`  and `end_time` . It only calculates the OHLCV (Open, High, Low, Close, Volume) for the entire duration between `start_time`  and `end_time`. 

## Data Cleaning Report

### Identified Data Issues

- Duplicate Records
- Outliers
- Missing Data
- Negative Prices
- Timestamps beyond Trading Time

- All problematic data is directly discarded to ensure data integrity and prevent inaccuracies from propagating into OHLCV calculations.

## Sample Output Files

Below are examples of the flat files generated by the interface for specified intervals and time frames:

Example command to generate output files:

```sh
python main.py 2024-09-16-09:30:00.076 2024-09-20-15:56:01.241
```

The output file is stored as `query_result.csv`